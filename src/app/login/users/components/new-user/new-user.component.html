<div class="new-user-container">
  <button-back></button-back>
  <h1 class="new-user-container__title">Create a new user</h1>
  <form class="new-user-form" [formGroup]="newUserForm" (ngSubmit)="onSubmit()">
    <form-control-text
      formControlName="name"
      [controlName]="'name'"
      [control]="newUserForm.controls['name']"
    ></form-control-text>
    <form-control-radio-group
      formControlName="isAdmin"
      [control]="newUserForm.controls['isAdmin']"
      [legend]="'Admin'"
      [fields]="fields"
      (change)="onChange()"
    ></form-control-radio-group>
    <form-control-password *ngIf="isAdmin"
      formControlName="pin"
      [controlName]="'pin'"
      [control]="newUserForm.controls['pin']"
    ></form-control-password>
    <button-submit [disabled]="newUserForm.invalid"></button-submit>
    <modal [headerTitle]="'Confirm account password'" [openModal]="openModal" (closeModal)="onCloseModal($event)">
      <ng-container *modalBody>
        <form-control-password *ngIf="isAdmin && openModal"
          formControlName="password"
          [controlName]="'password'"
          [control]="newUserForm.controls['password']"
        ></form-control-password>
        <button-submit [disabled]="newUserForm.invalid" (click)="onSubmit()"></button-submit>
      </ng-container>
    </modal>
  </form>
</div>